<Page x:Class="SettingsPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
      xmlns:local="clr-namespace:CompactGUI"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
      d:DataContext="{d:DesignInstance Type=local:SettingsViewModel}"
      d:Height="1400" d:Width="800"
      mc:Ignorable="d">
    <Grid Margin="40,20" ScrollViewer.CanContentScroll="False">
        <Grid>
            <TextBlock Text="Settings"
                       FontSize="26"
                       Foreground="{StaticResource CardForeground}" />



            <Grid HorizontalAlignment="Right" VerticalAlignment="Top">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <!--  There are less stupid ways of adding customised SVG to XAML than this...  -->

                <Button Grid.Column="1"
                        Width="137" Height="37"
                        Margin="10" Padding="0,6" HorizontalContentAlignment="Stretch"
                        VerticalContentAlignment="Stretch"
                        Command="{Binding OpenKoFiCommand}">
                    <Canvas Opacity="1">

                        <Canvas.RenderTransform>
                            <ScaleTransform CenterX="0" CenterY="0" ScaleX="0.09" ScaleY="0.09" />
                        </Canvas.RenderTransform>

                        <Path Data="M448.18652,174.15791V102.29854a6.67935,6.67935,0,0,1,6.69922-6.69922h17.29492a23.14135,23.14135,0,0,1,18.5127,37.02636,26.08472,26.08472,0,0,1-13.7627,48.23047h-21.5581a.11874.11874,0,0,1-.12158-.12109c-.24366,0-.24366.12109-.36524.12109A6.75826,6.75826,0,0,1,448.18652,174.15791Zm13.51953-45.55176h10.47461a9.774,9.774,0,0,0,9.62159-9.86523,9.56462,9.56462,0,0,0-9.62159-9.62207H461.70605Zm0,38.73047h15.22461a12.60562,12.60562,0,0,0,0-25.21094H461.70605Z" Fill="#fff" />
                        <Path Data="M543.30518,180.85615a25.47074,25.47074,0,0,1-25.3335-25.333V126.41377a6.57929,6.57929,0,0,1,6.45508-6.45508,6.49719,6.49719,0,0,1,6.45556,6.45508v29.10938A12.32007,12.32007,0,0,0,543.30518,167.946a12.63347,12.63347,0,0,0,12.78857-12.42285V126.41377a6.39243,6.39243,0,0,1,6.3335-6.45508,6.77437,6.77437,0,0,1,6.57714,6.45508v29.10938C569.00439,169.40791,557.312,180.85615,543.30518,180.85615Z" Fill="#fff" />
                        <Path Data="M639.7627,126.41377v46.03906a28.77024,28.77024,0,0,1-41.65381,26.06348,6.372,6.372,0,0,1-3.16651-8.64746,6.69181,6.69181,0,0,1,8.64746-2.67871,16.29746,16.29746,0,0,0,7.06446,1.70508,16.09832,16.09832,0,0,0,15.22363-11.084,23.66274,23.66274,0,0,1-11.57031,2.92383,25.62727,25.62727,0,0,1-25.45508-25.57715V126.41377a6.47315,6.47315,0,0,1,6.333-6.45508,6.27215,6.27215,0,0,1,6.45507,6.45508v28.74414a12.60731,12.60731,0,0,0,25.21192,0V126.41377a6.2442,6.2442,0,0,1,6.333-6.45508A6.52308,6.52308,0,0,1,639.7627,126.41377Z" Fill="#fff" />
                        <Path Data="M752.90332,145.17061v29.23047a6.49756,6.49756,0,0,1-6.45508,6.45507,6.68655,6.68655,0,0,1-6.57715-6.45507V145.17061a12.42434,12.42434,0,0,0-24.8457.36523v28.86524c0,.24414-.12207.60937-.12207.85253v.36524c-.12207.24414-.12207.4873-.36523.73144v.6084a7.10907,7.10907,0,0,1-6.08985,3.89746c-.4873,0-.85254-.12109-1.21777-.12109a6.63054,6.63054,0,0,1-5.23731-6.334V126.53584a6.44715,6.44715,0,0,1,6.45508-6.57715A6.17885,6.17885,0,0,1,714.294,123.612a25.63672,25.63672,0,0,1,13.03222-3.65332,25.275,25.275,0,0,1,19.12207,8.40332,25.08719,25.08719,0,0,1,19.12207-8.40332,25.44472,25.44472,0,0,1,25.334,25.57715v28.86524a6.4984,6.4984,0,0,1-6.45606,6.45507,6.60365,6.60365,0,0,1-6.57617-6.45507V145.53584a12.47748,12.47748,0,0,0-12.30176-12.54492A12.6429,12.6429,0,0,0,752.90332,145.17061Z" Fill="#fff" />
                        <Path Data="M813.55176,150.40791c.12109-16.56445,13.03222-30.44922,29.71777-30.44922,15.834,0,28.37891,11.81446,29.35254,28.25684v.6084a3.3938,3.3938,0,0,1-.12109,1.09668c-.36621,2.92285-2.92383,4.87109-6.334,4.87109H827.43652a15.96343,15.96343,0,0,0,4.14063,8.03906c2.55762,2.92285,7.42969,5.11524,11.69238,5.48047,4.38477.36524,9.62207-.73047,12.667-3.04492,2.55762-2.67969,7.55078-2.31348,9.13477-.36523,1.583,1.70507,2.80078,5.35937,0,7.917-5.96777,5.48047-13.1543,8.03808-21.80176,8.03808C826.584,180.73506,813.67285,166.97139,813.55176,150.40791Zm13.27539-5.96875h34.46777c-1.21777-4.87109-7.42871-12.05762-18.02539-12.91015C832.917,132.01631,827.80176,139.446,826.82715,144.43916Z" Fill="#fff" />
                        <Path Data="M980.03906,150.529v23.87207a6.49756,6.49756,0,0,1-6.45508,6.45507,6.63053,6.63053,0,0,1-6.334-5.2373,27.65366,27.65366,0,0,1-16.19824,5.2373,28.29337,28.29337,0,0,1-20.70508-8.89062,31.17257,31.17257,0,0,1-8.28223-21.43652,30.73316,30.73316,0,0,1,8.28223-21.43555,28.04751,28.04751,0,0,1,20.70508-9.13477,27.7626,27.7626,0,0,1,16.19824,5.3584,6.61794,6.61794,0,0,1,6.334-5.3584,6.52411,6.52411,0,0,1,6.45508,6.57715Zm-12.91015,0a17.91142,17.91142,0,0,0-4.75-12.54493,15.05824,15.05824,0,0,0-11.32715-4.99316,14.6864,14.6864,0,0,0-11.32715,4.99316,17.83594,17.83594,0,0,0-4.62793,12.54493,18.26612,18.26612,0,0,0,4.62793,12.54492,15.33922,15.33922,0,0,0,11.32715,4.75,15.74436,15.74436,0,0,0,11.32715-4.75A18.35145,18.35145,0,0,0,967.12891,150.529Z" Fill="#fff" />
                        <Path Data="M1036.17871,150.529c0-16.92969,14.12793-30.44825,30.93555-30.57032a32.10452,32.10452,0,0,1,19.36621,6.69824,6.69586,6.69586,0,0,1,1.33887,9.01368,6.48661,6.48661,0,0,1-9.13379,1.21777,19.43225,19.43225,0,0,0-11.57129-3.89746c-9.86524,0-18.02539,8.16016-18.02539,17.53809,0,9.3789,8.16015,17.417,18.02539,17.417a19.7183,19.7183,0,0,0,11.57129-3.89746,6.63587,6.63587,0,0,1,9.13379,1.33984,6.727,6.727,0,0,1-1.33887,9.0127,33.55855,33.55855,0,0,1-19.36621,6.45507C1050.30664,180.85615,1036.17871,167.21553,1036.17871,150.529Z" Fill="#fff" />
                        <Path Data="M1113.75879,171.96553a30.3973,30.3973,0,0,1-8.4043-21.43652,31.42616,31.42616,0,0,1,8.4043-21.31446,28.44706,28.44706,0,0,1,20.94922-9.25586,26.93551,26.93551,0,0,1,20.33984,9.25586,30.43342,30.43342,0,0,1,8.52539,21.31446c0,8.52636-3.04492,16.07714-8.52539,21.43652a26.93214,26.93214,0,0,1-20.33984,9.25586A28.44343,28.44343,0,0,1,1113.75879,171.96553Zm4.87207-21.43652a19.69256,19.69256,0,0,0,4.38476,12.91015A16.48,16.48,0,0,0,1134.708,167.946a15.94613,15.94613,0,0,0,11.20508-4.50684,18.7136,18.7136,0,0,0,4.75-12.91015,18.31431,18.31431,0,0,0-4.75-12.666,17.20616,17.20616,0,0,0-11.20508-4.62891,17.70765,17.70765,0,0,0-11.69239,4.62891A19.25709,19.25709,0,0,0,1118.63086,150.529Z" Fill="#fff" />
                        <Path Data="M1199.98633,115.93916v1.70508h3.65332a6.67934,6.67934,0,0,1,6.69922,6.69922,6.75825,6.75825,0,0,1-6.69922,6.69824h-3.65332v42.99414a6.69873,6.69873,0,1,1-13.39746,0V131.0417h-3.167a6.78428,6.78428,0,0,1-6.82032-6.69824,6.7066,6.7066,0,0,1,6.82032-6.69922h3.167v-1.70508c0-4.50586.4873-8.40332,2.31347-11.93555a14.50793,14.50793,0,0,1,8.76954-7.55175,24.61459,24.61459,0,0,1,7.30761-.97461,6.76,6.76,0,0,1,0,13.51953,8.732,8.732,0,0,0-3.167.36523,1.28516,1.28516,0,0,0-.73047.36524C1200.96,109.72725,1199.98633,111.4333,1199.98633,115.93916Z" Fill="#fff" />
                        <Path Data="M1244.07324,115.93916v1.70508h3.65332a6.67934,6.67934,0,0,1,6.69922,6.69922,6.75825,6.75825,0,0,1-6.69922,6.69824h-3.65332v42.99414a6.69873,6.69873,0,1,1-13.39746,0V131.0417h-3.167a6.78428,6.78428,0,0,1-6.82031-6.69824,6.7066,6.7066,0,0,1,6.82031-6.69922h3.167v-1.70508c0-4.50586.48731-8.40332,2.31348-11.93555a14.51055,14.51055,0,0,1,8.76953-7.55175,24.61465,24.61465,0,0,1,7.30762-.97461,6.76,6.76,0,0,1,0,13.51953,8.72192,8.72192,0,0,0-3.166.36523,1.28543,1.28543,0,0,0-.73144.36524C1245.04688,109.72725,1244.07324,111.4333,1244.07324,115.93916Z" Fill="#fff" />
                        <Path Data="M1262.70605,150.40791c.1211-16.56445,13.03223-30.44922,29.71778-30.44922,15.834,0,28.3789,11.81446,29.35254,28.25684v.6084a3.39354,3.39354,0,0,1-.1211,1.09668c-.36621,2.92285-2.92382,4.87109-6.334,4.87109h-38.73047a15.96335,15.96335,0,0,0,4.14063,8.03906c2.55761,2.92285,7.42968,5.11524,11.69238,5.48047,4.38476.36524,9.62207-.73047,12.667-3.04492,2.55762-2.67969,7.55078-2.31348,9.13477-.36523,1.583,1.70507,2.80078,5.35937,0,7.917-5.96778,5.48047-13.1543,8.03808-21.80176,8.03808C1275.73828,180.73506,1262.82715,166.97139,1262.70605,150.40791Zm13.2754-5.96875h34.46777c-1.21777-4.87109-7.42871-12.05762-18.02539-12.91015C1282.07129,132.01631,1276.95605,139.446,1275.98145,144.43916Z" Fill="#fff" />
                        <Path Data="M1336.876,150.40791c.12109-16.56445,13.03222-30.44922,29.71777-30.44922,15.834,0,28.37891,11.81446,29.35254,28.25684v.6084a3.3938,3.3938,0,0,1-.12109,1.09668c-.36622,2.92285-2.92383,4.87109-6.334,4.87109h-38.73047a15.96335,15.96335,0,0,0,4.14063,8.03906c2.55761,2.92285,7.42968,5.11524,11.69238,5.48047,4.38477.36524,9.62207-.73047,12.667-3.04492,2.55762-2.67969,7.55078-2.31348,9.13477-.36523,1.583,1.70507,2.80078,5.35937,0,7.917-5.96778,5.48047-13.1543,8.03808-21.80176,8.03808C1349.9082,180.73506,1336.99707,166.97139,1336.876,150.40791Zm13.27539-5.96875h34.46777c-1.21777-4.87109-7.42871-12.05762-18.02539-12.91015C1356.24121,132.01631,1351.126,139.446,1350.15137,144.43916Z" Fill="#fff" />
                        <Path Data="M301.10726,155.20527a72.64418,72.64418,0,0,1-15.58258.2681V102.82942h10.57885a23.75507,23.75507,0,0,1,24.079,24.44178c0,17.727-9.1342,24.71074-19.07531,27.93407m45.28651-36.95706c-3.08594-16.29847-11.85981-26.45154-20.8516-32.72972a55.46669,55.46669,0,0,0-31.77857-9.82873H132.80546c-5.59922,0-7.744,5.46684-7.76521,8.205-.00276.35708.01011,1.7861.01011,1.7861s-.26406,71.20994.236,109.24372c1.519,22.45424,24.01634,22.44638,24.01634,22.44638s73.4518-.21494,108.67788-.43393a20.73464,20.73464,0,0,0,4.90529-.5894c20.05633-5.01772,22.13125-23.65022,21.91686-34.03715,40.314,2.23969,68.75758-26.20732,61.59109-64.06224" Fill="#fff" />
                        <Path Data="M203.88276,187.84042a2.48038,2.48038,0,0,0,2.86921-.21386s25.61811-23.38182,37.15916-36.84762c10.265-12.04636,10.93412-32.34669-6.69431-39.93188-17.628-7.58481-32.132,8.9235-32.132,8.9235-12.57767-13.83327-31.61372-13.133-40.41829-3.77113-8.80417,9.36187-5.72976,25.43024.83851,34.373,6.16576,8.39456,33.26672,32.54951,37.37421,36.63455a8.5541,8.5541,0,0,0,1.00353.83339" Fill="#ff5e5b" />

                    </Canvas>

                </Button>

            </Grid>

        </Grid>

        <ScrollViewer Margin="0,50,0,0">
            <StackPanel ScrollViewer.CanContentScroll="True">

                <ui:CardExpander Margin="-15,0"
                                 Background="Transparent" BorderBrush="Transparent" ContentPadding="0"
                                 FlowDirection="RightToLeft" IsExpanded="True"
                                 Style="{StaticResource CustomCardExpanderStyle}">
                    <ui:CardExpander.Header>
                        <Label Content="Filetype Management"
                               Margin="10,0"
                               FlowDirection="LeftToRight" />

                    </ui:CardExpander.Header>

                    <StackPanel Margin="15,-10,15,10" FlowDirection="LeftToRight">

                        <Grid Margin="0,10,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="250" />
                                <ColumnDefinition Width="100" />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition />
                                <RowDefinition Height="5" />
                                <RowDefinition />
                            </Grid.RowDefinitions>

                            <Label Content="Manage local skipped filetypes" VerticalAlignment="Center" />
                            <Button x:Name="UiEditSkipListBtn"
                                    Content="edit"
                                    Grid.Column="1"
                                    Width="100" Height="37"
                                    BorderThickness="0"
                                    Command="{Binding EditSkipListCommand}"
                                    IsEnabled="True" />

                            <Label Content="Agression of online skiplist"
                                   Grid.Row="2"
                                   VerticalAlignment="Center" />
                            <TextBlock x:Name="SkipHelpIcon"
                                       Text="(?)"
                                       Grid.Row="2"
                                       Margin="175,0,0,0" VerticalAlignment="Center"
                                       Cursor="Hand" FontSize="14" Foreground="#FF98A9B9" TextDecorations="Underline">

                                <ToolTipService.ToolTip>
                                    <ToolTip Placement="Top">
                                        <TextBlock Text="For Steam games only.&#x0a;When choosing to skip user-submitted filetypes, this setting determines how many submissions are required for each filetype to consider skipping it. 'low' is generally best, as higher options run the risk of skipping files that would otherwise compress well."
                                                   Width="200"
                                                   TextAlignment="Left" TextWrapping="Wrap" />
                                    </ToolTip>
                                </ToolTipService.ToolTip>
                            </TextBlock>

                            <ComboBox x:Name="ComboBoxSkipUserResultsAggression"
                                      Grid.Row="2" Grid.Column="1"
                                      Foreground="#98A9B9" IsEnabled="False" SelectedIndex="0">
                                <ComboBoxItem>
                                    <TextBlock Text="low"
                                               FontSize="14" FontWeight="SemiBold" Foreground="#98A9B9" />
                                </ComboBoxItem>
                                <ComboBoxItem>
                                    <TextBlock Text="medium"
                                               FontSize="14" FontWeight="SemiBold" Foreground="#98A9B9" />
                                </ComboBoxItem>
                                <ComboBoxItem>
                                    <TextBlock Text="high"
                                               FontSize="14" FontWeight="SemiBold" Foreground="#98A9B9" />
                                </ComboBoxItem>
                            </ComboBox>

                        </Grid>

                    </StackPanel>

                </ui:CardExpander>

                <Separator Height="1" />

                <ui:CardExpander Margin="-15,0"
                                 Background="Transparent" BorderBrush="Transparent" ContentPadding="0"
                                 FlowDirection="RightToLeft" IsExpanded="True"
                                 Style="{StaticResource CustomCardExpanderStyle}">
                    <ui:CardExpander.Header>
                        <Label Content="System Integration"
                               Margin="10,0"
                               FlowDirection="LeftToRight" />

                    </ui:CardExpander.Header>

                    <StackPanel Margin="15,-10,15,10" FlowDirection="LeftToRight">
                        <StackPanel Margin="-10,10,0,0">
                            <CheckBox x:Name="UiIsContextEnabled"
                                      Content="Add to right-click context menu"
                                      Margin="0,-3"
                                      IsChecked="{Binding AppSettings.IsContextIntegrated, Mode=TwoWay}" />
                            <CheckBox x:Name="UiIsStartMenuEnabled"
                                      Content="Add to start menu"
                                      Margin="0,-3"
                                      IsChecked="{Binding AppSettings.IsStartMenuEnabled, Mode=TwoWay}" />
                            <CheckBox x:Name="UiShowNotifications"
                                      Content="Show notification on completion"
                                      Margin="0,-3"
                                      IsChecked="{Binding AppSettings.ShowNotifications, Mode=TwoWay}" />
                            <CheckBox x:Name="UiAlwaysStartInTray"
                                      Content="Start CompactGUI in system tray"
                                      Margin="0,-3"
                                      IsChecked="{Binding AppSettings.StartInSystemTray}" />

                        </StackPanel>
                    </StackPanel>


                </ui:CardExpander>

                <Separator Height="1" />


                <ui:CardExpander Margin="-15,0"
                                 Background="Transparent" BorderBrush="Transparent" ContentPadding="0"
                                 FlowDirection="RightToLeft" IsExpanded="True"
                                 Style="{StaticResource CustomCardExpanderStyle}">
                    <ui:CardExpander.Header>
                        <Label Content="Compression Settings"
                               Margin="10,0"
                               FlowDirection="LeftToRight" />

                    </ui:CardExpander.Header>


                    <StackPanel Margin="15,-10,15,10" FlowDirection="LeftToRight">
                        <Grid Margin="0,10,0,0">

                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="250" />
                                <ColumnDefinition Width="200" />

                            </Grid.ColumnDefinitions>

                            <Grid.RowDefinitions>
                                <RowDefinition />
                                <RowDefinition Height="5" />
                                <RowDefinition />
                                <RowDefinition Height="5" />
                                <RowDefinition />
                            </Grid.RowDefinitions>

                            <Label Content="Maximum Compression Threads" />
                            <StackPanel Grid.Column="1"
                                        Margin="15,0,15,0"
                                        Orientation="Horizontal">

                                <Slider x:Name="CompressionParallelism"
                                        Width="130"
                                        IsSnapToTickEnabled="True" LargeChange="1" Maximum="16" Minimum="0"
                                        Orientation="Horizontal" SmallChange="1" TickFrequency="1" TickPlacement="BottomRight"
                                        Value="{Binding AppSettings.MaxCompressionThreads, Mode=TwoWay}" />

                                <Label Content="{Binding AppSettings.MaxCompressionThreads, FallbackValue=0}"
                                       Margin="15,0"
                                       FontWeight="SemiBold" />
                            </StackPanel>

                            <CheckBox x:Name="UiLockHddToOneThread"
                                      Content="HDDs only use 1 thread"
                                      Grid.Row="2"
                                      Margin="-10,0"
                                      IsChecked="{Binding AppSettings.LockHDDsToOneThread}" />

                            <CheckBox x:Name="UiUseEstimator"
                                      Content="Estimate Compression for non-Steam Folders (beta)"
                                      Grid.Row="4" Grid.ColumnSpan="2"
                                      Margin="-10,0"
                                      IsChecked="{Binding AppSettings.EstimateCompressionForNonSteamFolders}">
                                <CheckBox.ToolTip>
                                    <ToolTip Placement="Top">
                                        <TextBlock Text="Quickly parses over files and estimates their compression ratio without writing to disk.                                                    This will likely be super laggy on HDDs!                                                    "
                                                   Width="200"
                                                   TextAlignment="Left" TextWrapping="Wrap" />
                                    </ToolTip>
                                </CheckBox.ToolTip>
                            </CheckBox>
                        </Grid>
                    </StackPanel>

                </ui:CardExpander>

                <Separator Height="1" />


                <ui:CardExpander Margin="-15,0"
                                 Background="Transparent" BorderBrush="Transparent" ContentPadding="0"
                                 FlowDirection="RightToLeft" IsExpanded="True"
                                 Style="{StaticResource CustomCardExpanderStyle}">
                    <ui:CardExpander.Header>
                        <Label Content="Background Watcher Settings"
                               Margin="10,0"
                               FlowDirection="LeftToRight" />

                    </ui:CardExpander.Header>


                    <StackPanel Margin="15,-10,15,10" FlowDirection="LeftToRight">
                        <StackPanel Margin="-10,10,0,0">
                            <CheckBox x:Name="UiEnableBackgroundWatcher"
                                      Content="Monitor compressed folders for changes"
                                      Margin="0,-3"
                                      IsChecked="{Binding AppSettings.EnableBackgroundWatcher, Mode=TwoWay}">

                                <i:Interaction.Triggers>
                                    <i:EventTrigger EventName="Unchecked">
                                        <i:InvokeCommandAction Command="{Binding DisableAutoCompressionCommand}" />
                                    </i:EventTrigger>
                                </i:Interaction.Triggers>
                            </CheckBox>

                            <WrapPanel Margin="45,10,0,0"
                                       IsEnabled="{Binding AppSettings.EnableBackgroundWatcher}"
                                       Orientation="Horizontal">
                                <TextBlock Text="Compress folders: " VerticalAlignment="Center" />

                                <ComboBox x:Name="BackgroundModeSelector"
                                          Width="290" Height="35"
                                          Margin="10,0,0,0" HorizontalAlignment="Left"
                                          SelectedIndex="{Binding AppSettings.BackgroundModeSelection, Mode=TwoWay, Converter={StaticResource EnumToIntConverter}}">
                                    <ComboBoxItem Content="Never" />
                                    <ComboBoxItem Content="When System is Idle" />
                                    <ComboBoxItem Content="On Schedule" />
                                    <ComboBoxItem Content="On Schedule if system is also idle" />

                                </ComboBox>

                                <StackPanel Margin="0,10"
                                            Orientation="Horizontal"
                                            Visibility="{Binding AppSettings.BackgroundModeSelection, Mode=OneWay, Converter={StaticResource BackgroundModeToVisibilityConverter}}">
                                    <TextBlock Text="every"
                                               Margin="10,0,10,0" VerticalAlignment="Center" />
                                    <ui:NumberBox Width="150"
                                                  Margin="5,0,0,0"
                                                  ClearButtonEnabled="False" Maximum="28" Minimum="1"
                                                  Value="{Binding AppSettings.ScheduledBackgroundInterval, UpdateSourceTrigger=PropertyChanged}" />
                                    <TextBlock Text="day(s)"
                                               Margin="-110,0,0,0" VerticalAlignment="Center"
                                               Foreground="#80FFFFFF" IsHitTestVisible="False" />
                                    <TextBlock Text="at"
                                               Margin="20,0,20,0" VerticalAlignment="Center" />
                                    <ComboBox Width="60"
                                              Padding="8,8,0,8"
                                              ItemsSource="{Binding HourOptions}"
                                              SelectedIndex="{Binding AppSettings.ScheduledBackgroundHour}">
                                        <i:Interaction.Behaviors>
                                            <local:FocusOnMouseOverBehavior />
                                        </i:Interaction.Behaviors>
                                        <ComboBox.ItemTemplate>
                                            <DataTemplate>
                                                <TextBlock Text="{Binding StringFormat={}{0:D2}}" />
                                            </DataTemplate>
                                        </ComboBox.ItemTemplate>
                                    </ComboBox>
                                    <TextBlock Text=":"
                                               Margin="5,0,5,0" VerticalAlignment="Center" />
                                    <ComboBox Width="60"
                                              Padding="8,8,0,8"
                                              ItemsSource="{Binding MinuteOptions}"
                                              SelectedIndex="{Binding AppSettings.ScheduledBackgroundMinute}">
                                        <i:Interaction.Behaviors>
                                            <local:FocusOnMouseOverBehavior />
                                        </i:Interaction.Behaviors>
                                        <ComboBox.ItemTemplate>
                                            <DataTemplate>
                                                <TextBlock Text="{Binding StringFormat={}{0:D2}}" />
                                            </DataTemplate>
                                        </ComboBox.ItemTemplate>
                                    </ComboBox>
                                 
                                </StackPanel>

                            </WrapPanel>
                            <TextBlock Text="{Binding AppSettings.ScheduledBackgroundLastRan, StringFormat='{}Last ran: {0:dd MMM yyyy 	 HH:mm:ss }', Mode=OneWay}"
                                       Margin="45,10,0,0"
                                       Foreground="#30FFFFFF" />

                            <TextBlock Text="{Binding AppSettings.NextScheduledBackgroundRun, StringFormat='{}Next scheduled: {0:dd MMM yyyy 	 HH:mm:ss }', Mode=OneWay}"
                                       Margin="45,10,0,0"
                                       Foreground="#30FFFFFF"
                                       Visibility="{Binding AppSettings.BackgroundModeSelection, Mode=OneWay, Converter={StaticResource BackgroundModeToVisibilityConverter}}" />


                        </StackPanel>
                    </StackPanel>

                </ui:CardExpander>


                <Separator Height="1" />

                <ui:CardExpander Margin="-15,0"
                                 Background="Transparent" BorderBrush="Transparent" ContentPadding="0"
                                 FlowDirection="RightToLeft" IsExpanded="True"
                                 Style="{StaticResource CustomCardExpanderStyle}">
                    <ui:CardExpander.Header>
                        <Label Content="Update Settings"
                               Margin="10,0"
                               FlowDirection="LeftToRight" />

                    </ui:CardExpander.Header>


                    <StackPanel Margin="15,-10,15,10" FlowDirection="LeftToRight">
                        <StackPanel Margin="-10,10,0,0">
                            <CheckBox x:Name="UiEnablePreReleaseUpdates"
                                      Content="Check for pre-release updates"
                                      Margin="0,-3"
                                      IsChecked="{Binding AppSettings.EnablePreReleaseUpdates}" />

                        </StackPanel>
                    </StackPanel>

                </ui:CardExpander>

                <Separator Height="1" />

                <ui:CardExpander Margin="-15,0"
                                 Background="Transparent" BorderBrush="Transparent" ContentPadding="0"
                                 FlowDirection="RightToLeft" IsExpanded="True"
                                 Style="{StaticResource CustomCardExpanderStyle}">
                    <ui:CardExpander.Header>
                        <Label Content="UI Settings"
                               Margin="10,0"
                               FlowDirection="LeftToRight" />

                    </ui:CardExpander.Header>


                    <StackPanel Margin="15,-10,15,10" FlowDirection="LeftToRight">
                        <StackPanel Margin="-10,10,0,0">
                            <!-- Language Selector -->
                            <Grid Margin="0,0,0,10">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>
                                <Label Content="Language (Requires Restart)" VerticalAlignment="Center"/>
                                <ComboBox x:Name="UiLanguageComboBox" Grid.Column="1" Width="150" SelectedIndex="0" SelectionChanged="UiLanguageComboBox_SelectionChanged">
                                    <ComboBoxItem Content="English" Tag="en-US" />
                                    <ComboBoxItem Content="简体中文" Tag="zh-CN" />
                                    <ComboBoxItem Content="日本語" Tag="ja-JP" />
                                    <ComboBoxItem Content="한국어" Tag="ko-KR" />
                                    <ComboBoxItem Content="Deutsch" Tag="de-DE" />
                                    <ComboBoxItem Content="Français" Tag="fr-FR" />
                                    <ComboBoxItem Content="Русский" Tag="ru-RU" />
                                    <ComboBoxItem Content="Español" Tag="es-ES" />
                                </ComboBox>
                            </Grid>

                            <CheckBox x:Name="UiAlwaysShowDetailedCompressionMode"
                                      Content="Always show details on Compression Mode buttons"
                                      Margin="0,-3"
                                      IsChecked="{Binding AppSettings.AlwaysShowDetailedCompressionMode}" />

                        </StackPanel>
                    </StackPanel>

                </ui:CardExpander>



            </StackPanel>




        </ScrollViewer>



    </Grid>

</Page>